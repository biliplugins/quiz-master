jQuery,window.BWPQM_Script={init:function(){console.log("Custom Script Loaded.")}},jQuery(document).ready(function(l){let u=l("#quiz-container"),s=quizData.questions||[],n="1"===quizData.require_email,o=quizData.messages||[];let r=[];function c(e){var i=s[e];if(void 0===i){let t=0,i=(s.forEach((e,i)=>{parseInt(r[i])===parseInt(e.correct)&&t++}),Math.round(t/s.length*100)),a="";o,console.log("messages",o),o.forEach(e=>{i>=parseInt(e.min)&&i<=parseInt(e.max)&&(a=e.message)}),(n?(e,i)=>{u.html(`
				<div class="quiz-email-form">
					<p class="email-label">Please enter your email to see your result:</p>
					<input type="email" id="quiz-user-email" class="quiz-email-input" placeholder="you@example.com">
					<button id="submit-email" class="quiz-email-button">Submit</button>
					<div id="quiz-loading" class="quiz-spinner" style="display: none;"></div>
					<p id="email-error" class="quiz-email-error"></p>
				</div>
			`),l("#submit-email").on("click",function(){l("#quiz-user-email").val().trim().match(/^\S+@\S+\.\S+$/)?(l("#quiz-loading").show(),d(e,i)):l("#email-error").text("Please enter a valid email address.")})}:d)(i,a)}else{var a=s.length;let t=r[e];u.html(`
				<div class="quiz-progress">Question ${e+1} of ${a}</div>
				<div class="quiz-question">
					<h3>${i.question}</h3>
					<ul class="blp-question-wrapper" data-key="${e}">
						${i.answers.map((e,i)=>`
							<li>
								<label>
									<input type="radio" name="quiz-answer" value="${i}" ${t===i?"checked":""}> ${e}
								</label>
							</li>
						`).join("")}
					</ul>
					<div class="quiz-nav-buttons">
						<button id="prev-question" class="navigate-question" data-type="prev" style="${0===e?"display:none;":"display:block;"}">Previous</button>
						<button id="next-question" class="navigate-question" data-type="next">Next</button>
					</div>
				</div>
			`)}}function d(s,n){var e=l("#quiz-user-email").val()||"",e={action:"simple_quiz_save_result",quiz_id:quizData.quizId,answers:r,email:e,score:s,message:n};l.post(quizData.ajaxurl,e,function(e){var i=0,t=(u.html(`
					<div class="quiz-result">
						<div class="quiz-progress-bar">
							<div class="quiz-progress-fill" style="width: 0%"></div>
						</div>
						<h3>Your Score: ${s}%</h3>
						<p>${n}</p>
					</div>
				`),l(".quiz-progress-fill")),a=setInterval(function(){s<=i?clearInterval(a):(i++,t.css("width",i+"%"))},10)})}u.on("click",".navigate-question",function(){var t=l(this).data("type"),a=l('input[name="quiz-answer"]:checked').val();if(void 0===a&&"next"===t)alert("Please select an answer.");else{let e=l(".blp-question-wrapper").data("key"),i=0;i="next"===t?e+1:e-1,"next"===t&&r.push(parseInt(a));var a=parseInt(a)===parseInt(quizData.questions[e].correct),s=quizData.questions[e].explanation;s&&"next"===t?(u.find(".quiz-question").append(`
					<div class="quiz-explanation">
						<strong>${a?"Correct!":"Incorrect."}</strong>
						<p>${s}</p>
						<button id="continue-question">Continue</button>
					</div>
				`),l("#next-question").hide(),l("#continue-question").on("click",()=>{c(e+1)})):c(i)}}),c(0)});