jQuery(document).ready(function(a){let o=a("#quiz-questions"),u=0;function t(e={}){let s=u++,n=`
      <div class="quiz-question-accordion">
      <div class="quiz-question-header">Question: ${1+s}</div>
      <div class="quiz-question-content">
      <div class="quiz-question">
        <label>Question: ${1+s}</label>
        <input type="text" name="quiz_questions[${s}][question]" value="${e.question||""}" style="width: 100%;" />

        <div class="answers">
          <label>Answers:</label>`;var t=e.answers||["",""];let i=e.correct||0;t.forEach((e,t)=>{n+=`
        <div class="answer">
          <input type="radio" name="quiz_questions[${s}][correct]" value="${t}" ${parseInt(i)===t?"checked":""}>
          <input type="text" name="quiz_questions[${s}][answers][]" value="${e}" class="quiz-input-answer"/>
          <button type="button" class="remove-answer button-link">Remove</button>
        </div>`}),n+=`
        </div>
        <button type="button" class="add-answer button">Add More Answers</button>
        <textarea class="quiz-textarea" name="quiz_questions[${s}][explanation]" placeholder="Explanation (optional)">${e.explanation||""}</textarea>
        <button type="button" class="remove-question button-link">Remove Question</button>
      </div>
      </div>
      </div>
      </div>
      </div>`;t=a(n);o.append(t)}void 0!==window.quizQuestions&&Array.isArray(window.quizQuestions)&&window.quizQuestions.forEach(e=>t(e)),a(document).on("click","#add-question",function(){t()}),o.on("click",".add-answer",function(){var e=a(this).siblings(".answers"),t=a(this).closest(".quiz-question").find('input[type="radio"]').attr("name"),t=`
      <div class="answer" style="margin-bottom: 5px;">
        <input type="radio" name="${t}" value="${e.find(".answer").length}">
        <input type="text" name="${t.replace("[correct]","[answers][]")}" value="" class="quiz-input-answer" />
        <button type="button" class="remove-answer button-link">Remove</button>
      </div>`;e.append(t)}),o.on("click",".remove-answer",function(){a(this).closest(".answer").remove()}),o.on("click",".remove-question",function(){a(this).closest(".quiz-question").remove()}),a(document).on("click",".quiz-question-header",function(){a(this).toggleClass("active"),a(this).next(".quiz-question-content").toggleClass("hide")});let s;a(document).on("click","#add-result-message",function(){var e=`
      <div class="result-message" style="border: 1px solid #ccc; padding: 10px; margin-bottom: 15px;">
        <label>Score Range:</label><br>
        <input type="number" name="quiz_result_messages[${s=a(".result-message").length}][min]" placeholder="Min %" style="width: 80px;"> -
        <input type="number" name="quiz_result_messages[${s}][max]" placeholder="Max %" style="width: 80px;"><br><br>

        <label>Message:</label><br>
        <textarea class="result-message-editor" name="quiz_result_messages[${s}][message]"></textarea><br>

        <button type="button" class="remove-result-message button-link">Remove</button>
      </div>
    `;a("#quiz-results").append(e),"undefined"!=typeof tinymce?tinymce.init({selector:"textarea.result-message-editor",menubar:!1,toolbar:"bold italic underline bullist numlist link",height:150}):console.warn("TinyMCE not loaded"),+s}),a(document).on("click",".remove-result-message",function(){a(this).closest(".result-message").remove()}),tinymce.init({selector:"textarea.result-message-editor",menubar:!1,toolbar:"bold italic underline bullist numlist link",height:150})});